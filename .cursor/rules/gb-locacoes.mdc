---
description:
  GB-Locacoes - Sistema de Loca√ß√µes de Equipamentos para Constru√ß√£o Civil
globs: ['**/*.{ts,tsx,js,jsx,md,mdx,json,css,scss}']
alwaysApply: true
---

# üèóÔ∏è GB-LOCACOES - CURSOR RULES & DEVELOPMENT GUIDELINES

## üéØ **VIS√ÉO GERAL DO PROJETO**

**GB-Locacoes** √© uma plataforma moderna de loca√ß√£o de equipamentos para
constru√ß√£o civil, desenvolvida com Next.js 15, TypeScript, Prisma, PostgreSQL e
um design system robusto. O projeto segue princ√≠pios de arquitetura limpa,
componentiza√ß√£o inteligente e experi√™ncia do usu√°rio excepcional.

## üèõÔ∏è **ARQUITETURA & ESTRUTURA**

### **Stack Principal**

- **Framework**: Next.js 15.4.6 (App Router)
- **Linguagem**: TypeScript 5.9.2
- **UI**: React 19.1.1 + Tailwind CSS 3.4.17
- **Database**: PostgreSQL + Prisma 6.13.0
- **Auth**: NextAuth.js 4.24.11
- **State**: Zustand 5.0.7 + React Hook Form 7.62.0
- **Testing**: Vitest + Testing Library + Playwright

### **Estrutura de Diret√≥rios**

```
GB-Locacoes/
‚îú‚îÄ‚îÄ app/                    # App Router (Next.js 13+)
‚îÇ   ‚îú‚îÄ‚îÄ admin/             # √Årea administrativa
‚îÇ   ‚îú‚îÄ‚îÄ api/               # API Routes
‚îÇ   ‚îî‚îÄ‚îÄ (public)/          # Rotas p√∫blicas
‚îú‚îÄ‚îÄ components/            # Componentes React
‚îÇ   ‚îú‚îÄ‚îÄ ui/               # Componentes base (Radix UI)
‚îÇ   ‚îî‚îÄ‚îÄ (feature)/        # Componentes espec√≠ficos
‚îú‚îÄ‚îÄ lib/                  # Utilit√°rios e configura√ß√µes
‚îú‚îÄ‚îÄ hooks/                # Custom hooks
‚îú‚îÄ‚îÄ types/                # Defini√ß√µes TypeScript
‚îú‚îÄ‚îÄ schemas/              # Schemas de valida√ß√£o (Zod)
‚îú‚îÄ‚îÄ prisma/               # Schema e migra√ß√µes
‚îú‚îÄ‚îÄ stories/              # Storybook stories
‚îú‚îÄ‚îÄ design-tokens/        # Sistema de design tokens
‚îî‚îÄ‚îÄ tests/                # Testes
```

## üé® **DESIGN SYSTEM & IDENTIDADE VISUAL**

### **Princ√≠pios de Design**

1. **Consist√™ncia**: Todos os componentes devem seguir o design system
   estabelecido
2. **Acessibilidade**: WCAG 2.1 AA compliance obrigat√≥rio
3. **Responsividade**: Mobile-first approach
4. **Performance**: Otimiza√ß√£o para Core Web Vitals
5. **Usabilidade**: UX intuitiva e eficiente

### **Sistema de Cores**

- **Prim√°ria**: `#ea580c` (Orange-600)
- **Secund√°ria**: `#3B82F6` (Blue-500)
- **Neutra**: Escala de cinzas do Tailwind
- **Sem√¢ntica**: Success (green), Warning (yellow), Error (red)

### **Tipografia**

- **Sans**: Inter (var(--font-inter))
- **Heading**: Jost (var(--font-heading))
- **Escalas**: h1, h2, h3, base, small (clamp responsivo)

### **Componentes Base (Radix UI)**

SEMPRE utilize os componentes do diret√≥rio `components/ui/` que s√£o baseados em
Radix UI:

- `Button` - Bot√µes com variantes: default, destructive, outline, secondary,
  ghost, reset, link
- `Card` - Containers de conte√∫do
- `Dialog` - Modais e overlays
- `Form` - Formul√°rios com React Hook Form + Zod
- `Input` - Campos de entrada
- `Select` - Seletores dropdown
- `Toast` - Notifica√ß√µes (via Sonner)
- `Carousel` - Carross√©is (via Embla)
- `Table` - Tabelas de dados
- `Tabs` - Navega√ß√£o por abas
- `Accordion` - Acorde√µes expans√≠veis

### **Design Tokens**

Utilize SEMPRE os tokens do design system:

- Cores: `design-tokens/output/tokens-tailwind.json`
- Espa√ßamentos: Sistema 4px (4, 8, 12, 16, 20, 24, 32, 48, 64)
- Bordas: `--radius` (8px padr√£o)
- Sombras: Sistema de eleva√ß√£o consistente

## üß© **PADR√ïES DE COMPONENTES**

### **Estrutura de Componente**

```typescript
'use client'

import { cn } from '@/lib/utils'
import { cva, type VariantProps } from 'class-variance-authority'
import * as React from 'react'

const componentVariants = cva(
  'base-classes',
  {
    variants: {
      variant: {
        default: 'default-classes',
        // outras variantes
      },
      size: {
        default: 'default-size',
        // outros tamanhos
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  }
)

export interface ComponentProps
  extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof componentVariants> {
  // props espec√≠ficas
}

const Component = React.forwardRef<HTMLDivElement, ComponentProps>(
  ({ className, variant, size, ...props }, ref) => {
    return (
      <div
        className={cn(componentVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    )
  }
)
Component.displayName = 'Component'

export { Component, componentVariants }
```

### **Regras de Nomenclatura**

- **Componentes**: PascalCase (`EquipmentCard.tsx`)
- **Hooks**: camelCase com prefixo `use` (`useQuoteForm.ts`)
- **Utilit√°rios**: camelCase (`formatCurrency.ts`)
- **Tipos**: PascalCase (`EquipmentType.ts`)
- **Constantes**: UPPER_SNAKE_CASE (`API_ENDPOINTS`)

## üîß **DESENVOLVIMENTO & BOAS PR√ÅTICAS**

### **TypeScript**

- **Strict Mode**: Sempre habilitado
- **Interfaces vs Types**: Use interfaces para objetos, types para
  unions/intersections
- **Generics**: Utilize quando apropriado para reutiliza√ß√£o
- **Utility Types**: Aproveite `Pick`, `Omit`, `Partial`, `Required`

### **React Patterns**

- **Hooks**: Custom hooks para l√≥gica reutiliz√°vel
- **Context**: Para estado global (Settings, Auth)
- **ForwardRef**: Para componentes que precisam de ref
- **Memo**: Para otimiza√ß√£o de performance quando necess√°rio
- **Error Boundaries**: Para tratamento de erros

### **Formul√°rios**

SEMPRE use React Hook Form + Zod:

```typescript
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { z } from 'zod'

const formSchema = z.object({
  name: z.string().min(1, 'Nome √© obrigat√≥rio'),
  email: z.string().email('Email inv√°lido'),
})

type FormData = z.infer<typeof formSchema>

const MyForm = () => {
  const form = useForm<FormData>({
    resolver: zodResolver(formSchema),
  })

  return (
    <Form {...form}>
      <FormField
        control={form.control}
        name="name"
        render={({ field }) => (
          <FormItem>
            <FormLabel>Nome</FormLabel>
            <FormControl>
              <Input {...field} />
            </FormControl>
            <FormMessage />
          </FormItem>
        )}
      />
    </Form>
  )
}
```

### **Valida√ß√£o**

- **Zod**: Para valida√ß√£o de schemas
- **React Hook Form**: Para gerenciamento de formul√°rios
- **Valida√ß√£o Server-side**: Sempre implemente valida√ß√£o no backend

### **Estado Global**

- **Zustand**: Para estado global simples
- **Context**: Para configura√ß√µes e autentica√ß√£o
- **Local State**: Para estado espec√≠fico de componentes

## üéØ **FUNCIONALIDADES ESPEC√çFICAS**

### **Sistema de Autentica√ß√£o**

- **NextAuth.js**: Para autentica√ß√£o
- **Roles**: ADMIN, CLIENT
- **Middleware**: Prote√ß√£o de rotas
- **JWT**: Tokens de sess√£o

### **Upload de Arquivos**

- **Vercel Blob**: Para armazenamento
- **Supabase Storage**: Backup
- **Valida√ß√£o**: Tamanho e tipo de arquivo
- **Preview**: Para imagens

### **Integra√ß√µes Externas**

- **Stripe**: Pagamentos
- **Resend**: Emails
- **Melhor Envio**: Frete
- **ZapSign**: Assinaturas

### **Performance**

- **Next.js Image**: Otimiza√ß√£o de imagens
- **Lazy Loading**: Para componentes pesados
- **Code Splitting**: Autom√°tico com Next.js
- **Caching**: Estrat√©gias apropriadas

## üß™ **TESTING & QUALIDADE**

### **Testes**

- **Unit**: Vitest + Testing Library
- **Integration**: API routes
- **E2E**: Playwright
- **Storybook**: Para componentes

### **Code Quality**

- **ESLint**: Configura√ß√£o estrita
- **Prettier**: Formata√ß√£o consistente
- **TypeScript**: Strict mode
- **Husky**: Git hooks

## üì± **RESPONSIVIDADE & MOBILE**

### **Breakpoints**

- **Mobile**: < 768px
- **Tablet**: 768px - 1024px
- **Desktop**: > 1024px

### **Mobile-First**

- Comece sempre com estilos mobile
- Use `md:`, `lg:`, `xl:` para breakpoints maiores
- Teste em dispositivos reais

## üöÄ **DEPLOY & PRODU√á√ÉO**

### **Ambientes**

- **Development**: `pnpm dev`
- **Staging**: Vercel Preview
- **Production**: Vercel

### **Vari√°veis de Ambiente**

- **DATABASE_URL**: PostgreSQL
- **NEXTAUTH_SECRET**: Autentica√ß√£o
- **STRIPE_SECRET_KEY**: Pagamentos
- **RESEND_API_KEY**: Emails

## üé® **DIRETRIZES DE UI/UX**

### **Intera√ß√µes**

- **Hover States**: Sempre implemente
- **Focus States**: Para acessibilidade
- **Loading States**: Para opera√ß√µes ass√≠ncronas
- **Error States**: Tratamento de erros
- **Success States**: Feedback positivo

### **Anima√ß√µes**

- **Framer Motion**: Para anima√ß√µes complexas
- **CSS Transitions**: Para micro-intera√ß√µes
- **Performance**: 60fps sempre
- **Reduced Motion**: Respeite prefer√™ncias do usu√°rio

### **Acessibilidade**

- **ARIA Labels**: Sempre implemente
- **Keyboard Navigation**: Navega√ß√£o por teclado
- **Screen Readers**: Compatibilidade
- **Color Contrast**: M√≠nimo 4.5:1
- **Focus Management**: Gerenciamento de foco

## üîç **DEBUGGING & MONITORING**

### **Logging**

- **Pino**: Para logs estruturados
- **Vercel Analytics**: M√©tricas de performance
- **Error Tracking**: Captura de erros

### **Development Tools**

- **React DevTools**: Para debugging
- **Prisma Studio**: Para database
- **Storybook**: Para componentes

## üìö **DOCUMENTA√á√ÉO**

### **C√≥digo**

- **JSDoc**: Para fun√ß√µes complexas
- **README**: Para cada diret√≥rio importante
- **TypeScript**: Tipos bem definidos

### **Componentes**

- **Storybook**: Documenta√ß√£o visual
- **Props Interface**: Bem documentada
- **Examples**: Casos de uso

## ‚ö†Ô∏è **ANTI-PADR√ïES (N√ÉO FA√áA)**

### **Design System**

- ‚ùå N√£o crie componentes fora do design system
- ‚ùå N√£o use cores hardcoded
- ‚ùå N√£o ignore acessibilidade
- ‚ùå N√£o quebre a responsividade

### **Performance**

- ‚ùå N√£o fa√ßa re-renders desnecess√°rios
- ‚ùå N√£o carregue dados desnecess√°rios
- ‚ùå N√£o ignore lazy loading
- ‚ùå N√£o use imagens n√£o otimizadas

### **TypeScript**

- ‚ùå N√£o use `any`
- ‚ùå N√£o ignore erros de tipo
- ‚ùå N√£o use `@ts-ignore` sem justificativa
- ‚ùå N√£o crie tipos desnecess√°rios

### **React**

- ‚ùå N√£o use `useEffect` sem depend√™ncias
- ‚ùå N√£o ignore o ESLint
- ‚ùå N√£o crie componentes muito grandes
- ‚ùå N√£o ignore o React.memo quando apropriado

## üéØ **CHECKLIST DE DESENVOLVIMENTO**

Antes de submeter qualquer c√≥digo, verifique:

### **Funcionalidade**

- [ ] Funcionalidade implementada corretamente
- [ ] Valida√ß√£o adequada
- [ ] Tratamento de erros
- [ ] Loading states
- [ ] Success/error feedback

### **Design**

- [ ] Segue o design system
- [ ] Responsivo em todos os breakpoints
- [ ] Acess√≠vel (ARIA, keyboard, contrast)
- [ ] Anima√ß√µes suaves
- [ ] Estados visuais (hover, focus, active)

### **C√≥digo**

- [ ] TypeScript sem erros
- [ ] ESLint sem warnings
- [ ] Prettier aplicado
- [ ] Testes passando
- [ ] Performance adequada

### **Documenta√ß√£o**

- [ ] JSDoc para fun√ß√µes complexas
- [ ] Props bem documentadas
- [ ] README atualizado se necess√°rio
- [ ] Storybook stories se aplic√°vel

## üöÄ **COMANDOS √öTEIS**

```bash
# Development
pnpm dev                    # Iniciar desenvolvimento
pnpm build                  # Build de produ√ß√£o
pnpm start                  # Iniciar produ√ß√£o

# Database
pnpm db:generate           # Gerar cliente Prisma
pnpm db:push               # Push do schema
pnpm db:seed               # Seed do banco
pnpm db:studio             # Abrir Prisma Studio

# Testing
pnpm test                  # Rodar testes
pnpm test:watch            # Testes em watch
pnpm test:coverage         # Cobertura de testes
pnpm test:ui               # Interface de testes

# Quality
pnpm lint                  # Linting
pnpm lint:fix              # Fix autom√°tico
pnpm format                # Formata√ß√£o
pnpm format:check          # Verificar formata√ß√£o
pnpm type-check            # Verificar tipos

# Storybook
pnpm storybook             # Iniciar Storybook
pnpm build-storybook       # Build do Storybook
pnpm chromatic             # Publicar no Chromatic

# Design System
pnpm design-system:build-tokens    # Build dos tokens
pnpm design-system:watch-tokens    # Watch dos tokens
```

## üéØ **OBJETIVO FINAL**

Crie c√≥digo que seja:

- **Manuten√≠vel**: F√°cil de entender e modificar
- **Escal√°vel**: Preparado para crescimento
- **Perform√°tico**: Otimizado para velocidade
- **Acess√≠vel**: Inclusivo para todos os usu√°rios
- **Test√°vel**: Coberto por testes adequados
- **Documentado**: Bem explicado e exemplificado

**Lembre-se**: Qualidade sobre velocidade. Um c√≥digo bem escrito hoje economiza
horas de debugging amanh√£.

---

_Esta documenta√ß√£o deve ser atualizada conforme o projeto evolui. Mantenha-a
sempre atualizada e siga rigorosamente estas diretrizes para garantir
consist√™ncia e qualidade em todo o projeto._ description: globs: alwaysApply:
false

---

---
