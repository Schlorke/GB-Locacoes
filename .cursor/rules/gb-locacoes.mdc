---
description: GB-Locacoes - Sistema de LocaÃ§Ãµes de Equipamentos para ConstruÃ§Ã£o Civil | CURSOR OPTIMIZED RULES
globs: ['**/*.{ts,tsx,js,jsx,md,mdx,json,css,scss,env,env.*,prisma}']
alwaysApply: true
priority: high
---

# ğŸ—ï¸ GB-LOCACOES - CURSOR RULES & DEVELOPMENT GUIDELINES

## ğŸš€ **CURSOR IDE OPTIMIZATION FOR MAXIMUM PERFORMANCE**

### **âš¡ FAST-TRACK COMMANDS FOR COMMON TASKS**

```bash
# ğŸ”¥ EMERGENCY PRISMA FIX (30 seconds)
taskkill /F /IM node.exe 2>$null && rm -rf node_modules && pnpm i && pnpm prisma generate

# ğŸ§ª QUICK HEALTH CHECK
pnpm prisma version && pnpm build && pnpm test --run

# ğŸ¨ DESIGN SYSTEM VALIDATION  
pnpm storybook &; sleep 5; curl http://localhost:6006

# ğŸ“‹ FULL PROJECT LINT & FIX
pnpm lint:fix && pnpm format && pnpm type-check
```

### **ğŸ¯ CURSOR AUTOCOMPLETE OPTIMIZATION**

#### **Smart Snippets & Context-Aware Suggestions**
- **React Components**: Always suggest `components/ui/` first
- **API Routes**: Auto-import from `lib/` utilities
- **Type Safety**: Prefer interfaces over types for objects
- **Validation**: Always suggest Zod schemas for data validation
- **Styling**: Prioritize Tailwind classes from design tokens

#### **Code Intelligence Enhancements**
- **Jump to Definition**: Optimized for monorepo structure
- **Find References**: Include Storybook stories and tests
- **Refactoring**: Safe renames across TypeScript + JSX
- **Error Detection**: Real-time Prisma schema validation

### **ğŸ“š CONTEXTUAL DOCUMENTATION INTEGRATION**

#### **Inline Documentation Access**
- **Hover**: Show relevant `docs/` sections for components
- **Quick Fix**: Link to `docs/troubleshooting/` for errors
- **Code Actions**: Suggest patterns from `docs/features/`
- **Snippets**: Auto-generate based on `docs/getting-started/development.md`

# ğŸ—ï¸ GB-LOCACOES - CURSOR RULES & DEVELOPMENT GUIDELINES

## ğŸ“š **DOCUMENTAÃ‡ÃƒO COMO FONTE DE VERDADE**

> âš ï¸ **FUNDAMENTAL**: SEMPRE consulte a documentaÃ§Ã£o em `docs/` antes de
> implementar qualquer funcionalidade

### **ğŸ“ Estrutura da DocumentaÃ§Ã£o Oficial**

```
ğŸ“ docs/                          # CONSULTAR SEMPRE PRIMEIRO
â”œâ”€â”€ ğŸ“ getting-started/           # Setup, desenvolvimento, deploy
â”‚   â”œâ”€â”€ ğŸ“„ installation.md       # Setup inicial + compatibilidade
â”‚   â”œâ”€â”€ ğŸ“„ development.md        # PadrÃµes de desenvolvimento
â”‚   â”œâ”€â”€ ğŸ“„ deployment.md         # Deploy e produÃ§Ã£o
â”‚   â””â”€â”€ ğŸ“„ troubleshooting.md    # SoluÃ§Ãµes de problemas
â”œâ”€â”€ ğŸ“ architecture/              # Arquitetura tÃ©cnica
â”‚   â”œâ”€â”€ ğŸ“„ overview.md           # Stack + arquitetura completa
â”‚   â”œâ”€â”€ ğŸ“„ api.md                # DocumentaÃ§Ã£o das APIs
â”‚   â””â”€â”€ ğŸ“„ security.md           # Aspectos de seguranÃ§a
â”œâ”€â”€ ğŸ“ features/                  # Funcionalidades especÃ­ficas
â”‚   â”œâ”€â”€ ğŸ“„ admin-system.md       # Sistema admin COMPLETO
â”‚   â”œâ”€â”€ ğŸ“„ analytics-dashboard.md # Dashboard Analytics NOVO (JAN 2025)
â”‚   â””â”€â”€ ğŸ“„ design-system.md      # Identidade visual + componentes
â”œâ”€â”€ ğŸ“ guides/                    # Guias especÃ­ficos
â”‚   â””â”€â”€ ğŸ“„ storybook.md          # DocumentaÃ§Ã£o Storybook
â”œâ”€â”€ ğŸ“ references/                # ReferÃªncias tÃ©cnicas
â”‚   â””â”€â”€ ğŸ“„ dependencies.md       # Compatibilidade dependÃªncias
â””â”€â”€ ğŸ“ internal/                  # DocumentaÃ§Ã£o interna
    â”œâ”€â”€ ğŸ“„ cursor-setup.md       # Setup especÃ­fico Cursor
    â””â”€â”€ ğŸ“„ project-decisions.md  # DecisÃµes arquiteturais
```

### **ğŸ§  Anti-AlucinaÃ§Ã£o Protocol**

1. **ğŸ“– SEMPRE LER PRIMEIRO**: Antes de qualquer implementaÃ§Ã£o, consulte:
   - `docs/architecture/overview.md` - Para entender a arquitetura
   - `docs/features/design-system.md` - Para componentes e estilos
   - `docs/features/admin-system.md` - Para funcionalidades admin
   - `docs/getting-started/development.md` - Para padrÃµes de cÃ³digo

2. **ğŸ¨ DESIGN SYSTEM**: Use APENAS componentes documentados em:
   - `docs/features/design-system.md` - Sistema de design completo
   - `docs/features/admin-system.md` - Componentes administrativos
   - `stories/` - DocumentaÃ§Ã£o visual no Storybook

3. **ğŸ—ï¸ ARQUITETURA**: Siga RIGOROSAMENTE os padrÃµes em:
   - `docs/architecture/overview.md` - Estrutura e tecnologias
   - `docs/getting-started/development.md` - PadrÃµes de desenvolvimento

4. **âš ï¸ COMPATIBILIDADE**: Verifique SEMPRE em:
   - `docs/references/dependencies.md` - VersÃµes testadas e incompatibilidades

### **ğŸš¨ PROBLEMAS CRÃTICOS RESOLVIDOS (DEZ 2024) - NÃƒO REINTRODUZIR**

> âš ï¸ **ATENÃ‡ÃƒO CURSOR**: Este projeto passou por correÃ§Ãµes massivas em dezembro
> de 2024. NÃƒO reintroduza problemas que foram resolvidos!

#### **ğŸ—ï¸ Build Infrastructure - 100% ESTÃVEL**

- **âŒ NUNCA DELETE**: `scripts/post-prisma-generate.js` - arquivo CRÃTICO para
  build
- **âŒ NUNCA MODIFIQUE**: Scripts em `package.json` sem entender dependÃªncias
- **âœ… FUNCIONANDO**: Build automation que recria `lib/validations/index.ts`
- **ğŸ¯ STATUS**: Build time 6-8s, 100% success rate

#### **ğŸ”’ TypeScript - ZERO ERRORS ACHIEVED**

- **âŒ JAMAIS USE**: Tipos `any` - sempre crie interfaces especÃ­ficas
- **âœ… SEMPRE USE**: Safe navigation (`?.`) em objetos potencialmente undefined
- **âœ… SEMPRE USE**: Type guards e casts seguros (`as NextResponse`, `as const`)
- **ğŸ¯ STATUS**: 42 â†’ 0 erros TypeScript (100% resolvido)

#### **ğŸ“¦ Dependencies - MATRIX ESTÃVEL**

- **âŒ NÃƒO ATUALIZE**: Prisma para 6.14.0+ (quebra build completamente)
- **âŒ NÃƒO USE**: swagger-ui-react (incompatÃ­vel React 19)
- **âœ… IMPLEMENTAÃ‡ÃƒO CUSTOM**: `app/api-docs/page.tsx` para documentaÃ§Ã£o API
- **ğŸ¯ STATUS**: Zero conflitos de dependÃªncias

#### **ğŸ¯ ESLint - ZERO PROBLEMS ACHIEVED**

- **âŒ NÃƒO INCLUA**: Arquivos auto-gerados no linting
- **âœ… MANTENHA**: ExclusÃµes em `tsconfig.json` para
  `lib/validations/schemas/**`
- **ğŸ¯ STATUS**: 31,469 â†’ 0 problemas ESLint (100% resolvido)

#### **ğŸ“š DOCUMENTAÃ‡ÃƒO CRÃTICA PARA CURSOR**

- **ğŸ“– LEIA ANTES**: `docs/internal/critical-issues-resolved.md` - SOURCE OF
  TRUTH
- **ğŸ“ CONSULTE**: `docs/getting-started/troubleshooting.md` - problemas
  conhecidos
- **ğŸ§  ENTENDA**: Todas as soluÃ§Ãµes sÃ£o DEFINITIVAS e foram testadas
- **âš¡ MÃ‰TRICAS**: TypeScript 0 errors, ESLint 0 problems, Build SUCCESS, Tests
  30/30

### **ğŸš¨ REGRAS CRÃTICAS DE DOCUMENTAÃ‡ÃƒO**

1. **NÃƒO ALUCINE**: Se nÃ£o souber algo, consulte `docs/` primeiro
2. **NÃƒO INVENTE**: Use apenas componentes e padrÃµes documentados
3. **NÃƒO QUEBRE**: Siga as versÃµes especÃ­ficas em
   `docs/references/dependencies.md`
4. **NÃƒO IGNORE**: Toda funcionalidade deve seguir os padrÃµes em
   `docs/getting-started/development.md`
5. **ğŸ“ DOCUMENTE SEMPRE**: Atualize o `CHANGELOG.md` apÃ³s qualquer alteraÃ§Ã£o

### **ğŸ“– Fluxo de Trabalho ObrigatÃ³rio**

```
1. ğŸ“š LER docs relevantes
   â†“
2. ğŸ” VERIFICAR compatibilidade
   â†“
3. ğŸ¨ USAR componentes do design system
   â†“
4. ğŸ—ï¸ IMPLEMENTAR seguindo padrÃµes
   â†“
5. ğŸ“ ATUALIZAR CHANGELOG.md com mudanÃ§as
   â†“
6. âœ… TESTAR com referÃªncia na documentaÃ§Ã£o
```

## ğŸ¯ **VISÃƒO GERAL DO PROJETO**

**GB-Locacoes** Ã© uma plataforma moderna de locaÃ§Ã£o de equipamentos para
construÃ§Ã£o civil, desenvolvida com Next.js 15, TypeScript, Prisma, PostgreSQL e
um design system robusto. O projeto segue princÃ­pios de arquitetura limpa,
componentizaÃ§Ã£o inteligente e experiÃªncia do usuÃ¡rio excepcional.

## ğŸ›ï¸ **ARQUITETURA & ESTRUTURA**

### **Stack Principal**

- **Framework**: Next.js 15.4.6 (App Router)
- **Linguagem**: TypeScript 5.9.2
- **UI**: React 19.1.1 + Tailwind CSS 3.4.17
- **Database**: PostgreSQL + Prisma 6.13.0
- **Auth**: NextAuth.js 4.24.11
- **State**: Zustand 5.0.7 + React Hook Form 7.62.0
- **Testing**: Vitest + Testing Library + Playwright

### **Estrutura de DiretÃ³rios**

```
GB-Locacoes/
â”œâ”€â”€ app/                    # App Router (Next.js 13+)
â”‚   â”œâ”€â”€ admin/             # Ãrea administrativa
â”‚   â”œâ”€â”€ api/               # API Routes
â”‚   â””â”€â”€ (public)/          # Rotas pÃºblicas
â”œâ”€â”€ components/            # Componentes React
â”‚   â”œâ”€â”€ ui/               # Componentes base (Radix UI)
â”‚   â””â”€â”€ (feature)/        # Componentes especÃ­ficos
â”œâ”€â”€ lib/                  # UtilitÃ¡rios e configuraÃ§Ãµes
â”œâ”€â”€ hooks/                # Custom hooks
â”œâ”€â”€ types/                # DefiniÃ§Ãµes TypeScript
â”œâ”€â”€ schemas/              # Schemas de validaÃ§Ã£o (Zod)
â”œâ”€â”€ prisma/               # Schema e migraÃ§Ãµes
â”œâ”€â”€ stories/              # Storybook stories
â”œâ”€â”€ design-tokens/        # Sistema de design tokens
â””â”€â”€ tests/                # Testes
```

## ğŸ¨ **DESIGN SYSTEM & IDENTIDADE VISUAL**

### **PrincÃ­pios de Design**

1. **ConsistÃªncia**: Todos os componentes devem seguir o design system
   estabelecido
2. **Acessibilidade**: WCAG 2.1 AA compliance obrigatÃ³rio
3. **Responsividade**: Mobile-first approach
4. **Performance**: OtimizaÃ§Ã£o para Core Web Vitals
5. **Usabilidade**: UX intuitiva e eficiente

### **Sistema de Cores**

- **PrimÃ¡ria**: `#ea580c` (Orange-600)
- **SecundÃ¡ria**: `#3B82F6` (Blue-500)
- **Neutra**: Escala de cinzas do Tailwind
- **SemÃ¢ntica**: Success (green), Warning (yellow), Error (red)

### **Tipografia**

- **Sans**: Inter (var(--font-inter))
- **Heading**: Jost (var(--font-heading))
- **Escalas**: h1, h2, h3, base, small (clamp responsivo)

### **Componentes Base (Radix UI)**

SEMPRE utilize os componentes do diretÃ³rio `components/ui/` que sÃ£o baseados em
Radix UI:

- `Button` - BotÃµes com variantes: default, destructive, outline, secondary,
  ghost, reset, link
- `Card` - Containers de conteÃºdo
- `Dialog` - Modais e overlays
- `Form` - FormulÃ¡rios com React Hook Form + Zod
- `Input` - Campos de entrada
- `Select` - Seletores dropdown
- `Toast` - NotificaÃ§Ãµes (via Sonner)
- `Carousel` - CarrossÃ©is (via Embla)
- `Table` - Tabelas de dados
- `Tabs` - NavegaÃ§Ã£o por abas
- `Accordion` - AcordeÃµes expansÃ­veis

### **Design Tokens**

Utilize SEMPRE os tokens do design system:

- Cores: `design-tokens/output/tokens-tailwind.json`
- EspaÃ§amentos: Sistema 4px (4, 8, 12, 16, 20, 24, 32, 48, 64)
- Bordas: `--radius` (8px padrÃ£o)
- Sombras: Sistema de elevaÃ§Ã£o consistente

## ğŸ§© **PADRÃ•ES DE COMPONENTES**

### **Estrutura de Componente**

```typescript
'use client'

import { cn } from '@/lib/utils'
import { cva, type VariantProps } from 'class-variance-authority'
import * as React from 'react'

const componentVariants = cva(
  'base-classes',
  {
    variants: {
      variant: {
        default: 'default-classes',
        // outras variantes
      },
      size: {
        default: 'default-size',
        // outros tamanhos
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  }
)

export interface ComponentProps
  extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof componentVariants> {
  // props especÃ­ficas
}

const Component = React.forwardRef<HTMLDivElement, ComponentProps>(
  ({ className, variant, size, ...props }, ref) => {
    return (
      <div
        className={cn(componentVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    )
  }
)
Component.displayName = 'Component'

export { Component, componentVariants }
```

### **Regras de Nomenclatura**

- **Componentes**: PascalCase (`EquipmentCard.tsx`)
- **Hooks**: camelCase com prefixo `use` (`useQuoteForm.ts`)
- **UtilitÃ¡rios**: camelCase (`formatCurrency.ts`)
- **Tipos**: PascalCase (`EquipmentType.ts`)
- **Constantes**: UPPER_SNAKE_CASE (`API_ENDPOINTS`)

## ğŸ”§ **DESENVOLVIMENTO & BOAS PRÃTICAS**

### **TypeScript**

- **Strict Mode**: Sempre habilitado
- **Interfaces vs Types**: Use interfaces para objetos, types para
  unions/intersections
- **Generics**: Utilize quando apropriado para reutilizaÃ§Ã£o
- **Utility Types**: Aproveite `Pick`, `Omit`, `Partial`, `Required`

### **React Patterns**

- **Hooks**: Custom hooks para lÃ³gica reutilizÃ¡vel
- **Context**: Para estado global (Settings, Auth)
- **ForwardRef**: Para componentes que precisam de ref
- **Memo**: Para otimizaÃ§Ã£o de performance quando necessÃ¡rio
- **Error Boundaries**: Para tratamento de erros

### **FormulÃ¡rios**

SEMPRE use React Hook Form + Zod:

```typescript
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { z } from 'zod'

const formSchema = z.object({
  name: z.string().min(1, 'Nome Ã© obrigatÃ³rio'),
  email: z.string().email('Email invÃ¡lido'),
})

type FormData = z.infer<typeof formSchema>

const MyForm = () => {
  const form = useForm<FormData>({
    resolver: zodResolver(formSchema),
  })

  return (
    <Form {...form}>
      <FormField
        control={form.control}
        name="name"
        render={({ field }) => (
          <FormItem>
            <FormLabel>Nome</FormLabel>
            <FormControl>
              <Input {...field} />
            </FormControl>
            <FormMessage />
          </FormItem>
        )}
      />
    </Form>
  )
}
```

### **ValidaÃ§Ã£o**

- **Zod**: Para validaÃ§Ã£o de schemas
- **React Hook Form**: Para gerenciamento de formulÃ¡rios
- **ValidaÃ§Ã£o Server-side**: Sempre implemente validaÃ§Ã£o no backend

### **Estado Global**

- **Zustand**: Para estado global simples
- **Context**: Para configuraÃ§Ãµes e autenticaÃ§Ã£o
- **Local State**: Para estado especÃ­fico de componentes

## ğŸ¯ **FUNCIONALIDADES ESPECÃFICAS**

### **Sistema de AutenticaÃ§Ã£o**

- **NextAuth.js**: Para autenticaÃ§Ã£o
- **Roles**: ADMIN, CLIENT
- **Middleware**: ProteÃ§Ã£o de rotas
- **JWT**: Tokens de sessÃ£o

### **Upload de Arquivos**

- **Vercel Blob**: Para armazenamento
- **Supabase Storage**: Backup
- **ValidaÃ§Ã£o**: Tamanho e tipo de arquivo
- **Preview**: Para imagens

### **IntegraÃ§Ãµes Externas**

- **Stripe**: Pagamentos
- **Resend**: Emails
- **Melhor Envio**: Frete
- **ZapSign**: Assinaturas

### **ğŸ“Š Analytics e Monitoramento (NOVO - JAN 2025)**

- **Dashboard Analytics**: `/admin/analytics` - MÃ©tricas em tempo real
- **Sistema de Telemetria**: `lib/telemetry.ts` - Rastreamento simplificado
- **MÃ©tricas de API**: `lib/metrics.ts` - Coleta automÃ¡tica de performance
- **Security Monitoring**: `lib/security-monitoring.ts` - DetecÃ§Ã£o de ameaÃ§as
- **API Instrumentation**: `lib/api-instrumentation.ts` - InstrumentaÃ§Ã£o
  automÃ¡tica
- **OpenAPI Documentation**: `/api-docs` - DocumentaÃ§Ã£o interativa da API

### **Performance**

- **Next.js Image**: OtimizaÃ§Ã£o de imagens
- **Lazy Loading**: Para componentes pesados
- **Code Splitting**: AutomÃ¡tico com Next.js
- **Caching**: EstratÃ©gias apropriadas

## ğŸ§ª **TESTING & QUALIDADE**

### **Testes**

- **Unit**: Vitest + Testing Library
- **Integration**: API routes
- **E2E**: Playwright
- **Storybook**: Para componentes

### **Code Quality**

- **ESLint**: ConfiguraÃ§Ã£o estrita
- **Prettier**: FormataÃ§Ã£o consistente
- **TypeScript**: Strict mode
- **Husky**: Git hooks

## ğŸ“± **RESPONSIVIDADE & MOBILE**

### **Breakpoints**

- **Mobile**: < 768px
- **Tablet**: 768px - 1024px
- **Desktop**: > 1024px

### **Mobile-First**

- Comece sempre com estilos mobile
- Use `md:`, `lg:`, `xl:` para breakpoints maiores
- Teste em dispositivos reais

## ğŸš€ **DEPLOY & PRODUÃ‡ÃƒO**

### **Ambientes**

- **Development**: `pnpm dev`
- **Staging**: Vercel Preview
- **Production**: Vercel

### **VariÃ¡veis de Ambiente**

- **DATABASE_URL**: PostgreSQL
- **NEXTAUTH_SECRET**: AutenticaÃ§Ã£o
- **STRIPE_SECRET_KEY**: Pagamentos
- **RESEND_API_KEY**: Emails

## ğŸ¨ **DIRETRIZES DE UI/UX**

### **InteraÃ§Ãµes**

- **Hover States**: Sempre implemente
- **Focus States**: Para acessibilidade
- **Loading States**: Para operaÃ§Ãµes assÃ­ncronas
- **Error States**: Tratamento de erros
- **Success States**: Feedback positivo

### **AnimaÃ§Ãµes**

- **Framer Motion**: Para animaÃ§Ãµes complexas
- **CSS Transitions**: Para micro-interaÃ§Ãµes
- **Performance**: 60fps sempre
- **Reduced Motion**: Respeite preferÃªncias do usuÃ¡rio

### **Acessibilidade**

- **ARIA Labels**: Sempre implemente
- **Keyboard Navigation**: NavegaÃ§Ã£o por teclado
- **Screen Readers**: Compatibilidade
- **Color Contrast**: MÃ­nimo 4.5:1
- **Focus Management**: Gerenciamento de foco

## ğŸ” **DEBUGGING & MONITORING**

### **Logging**

- **Pino**: Para logs estruturados
- **Vercel Analytics**: MÃ©tricas de performance
- **Error Tracking**: Captura de erros

### **Development Tools**

- **React DevTools**: Para debugging
- **Prisma Studio**: Para database
- **Storybook**: Para componentes

## ğŸ“š **DOCUMENTAÃ‡ÃƒO**

### **CÃ³digo**

- **JSDoc**: Para funÃ§Ãµes complexas
- **README**: Para cada diretÃ³rio importante
- **TypeScript**: Tipos bem definidos

### **Componentes**

- **Storybook**: DocumentaÃ§Ã£o visual
- **Props Interface**: Bem documentada
- **Examples**: Casos de uso

## âš ï¸ **ANTI-PADRÃ•ES (NÃƒO FAÃ‡A)**

### **Design System**

- âŒ NÃ£o crie componentes fora do design system
- âŒ NÃ£o use cores hardcoded
- âŒ NÃ£o ignore acessibilidade
- âŒ NÃ£o quebre a responsividade

### **Performance**

- âŒ NÃ£o faÃ§a re-renders desnecessÃ¡rios
- âŒ NÃ£o carregue dados desnecessÃ¡rios
- âŒ NÃ£o ignore lazy loading
- âŒ NÃ£o use imagens nÃ£o otimizadas

### **TypeScript**

- âŒ NÃ£o use `any`
- âŒ NÃ£o ignore erros de tipo
- âŒ NÃ£o use `@ts-ignore` sem justificativa
- âŒ NÃ£o crie tipos desnecessÃ¡rios

### **React**

- âŒ NÃ£o use `useEffect` sem dependÃªncias
- âŒ NÃ£o ignore o ESLint
- âŒ NÃ£o crie componentes muito grandes
- âŒ NÃ£o ignore o React.memo quando apropriado

### **ğŸš¨ ANTI-PADRÃ•ES CRÃTICOS (BASEADOS EM PROBLEMAS RESOLVIDOS)**

#### **Build & Infrastructure**

- âŒ **NUNCA DELETE**: `scripts/post-prisma-generate.js` - quebra build
  completamente
- âŒ **NUNCA MODIFIQUE**: Scripts `prebuild`, `postinstall`, `db:generate` sem
  entender
- âŒ **NUNCA IGNORE**: Arquivos auto-gerados - sempre exclua do linting

#### **Dependencies & Compatibility**

- âŒ **NUNCA ATUALIZE**: Prisma para 6.14.0+ - incompatÃ­vel com Next.js 15
- âŒ **NUNCA USE**: swagger-ui-react - incompatÃ­vel com React 19
- âŒ **NUNCA ASSUMA**: Compatibilidade de packages - sempre consulte
  `docs/references/dependencies.md`

#### **Type Safety (CRÃTICO)**

- âŒ **NUNCA USE**: `unknown` sem type guards
- âŒ **NUNCA ACESSE**: Propriedades sem safe navigation (`?.`)
- âŒ **NUNCA MISTURE**: `Response | NextResponse` - sempre cast especÃ­fico

#### **ESLint & Code Quality**

- âŒ **NUNCA INCLUA**: `lib/validations/schemas/**` no linting
- âŒ **NUNCA IGNORE**: Warnings de unused imports - sempre limpe
- âŒ **NUNCA QUEBRE**: ConfiguraÃ§Ã£o do `tsconfig.json` exclude patterns

## ğŸ¯ **CURSOR-OPTIMIZED DEVELOPMENT CHECKLIST**

### **âš¡ INSTANT VALIDATION COMMANDS**
```bash
# Run these in Cursor's integrated terminal for instant feedback
pnpm run cursor:validate  # Custom script for full validation
pnpm run cursor:fix       # Auto-fix common issues  
pnpm run cursor:health    # Health check with detailed report
```

### **ğŸš¨ CRITICAL PRE-COMMIT CHECKLIST (AUTO-RUNNABLE)**

#### **ğŸ”§ Code Quality (Zero Tolerance)**
- [ ] `pnpm type-check` â†’ **TARGET: 0 TypeScript errors**
- [ ] `pnpm lint` â†’ **TARGET: 0 ESLint problems**  
- [ ] `pnpm format:check` â†’ **TARGET: 0 formatting issues**
- [ ] `pnpm test --run` â†’ **TARGET: 30/30 tests passing**

#### **ğŸ—ï¸ Build & Infrastructure (Mission Critical)**
- [ ] `pnpm build` â†’ **MUST SUCCEED** (6-8s expected)
- [ ] `scripts/post-prisma-generate.js` â†’ **NEVER DELETE THIS FILE**
- [ ] `pnpm prisma version` â†’ **MUST show "Query Engine (Node-API)"**
- [ ] Zero tipos `any` introduced without extreme justification

#### **ğŸ¨ Design System Compliance**
- [ ] Uses only `components/ui/` (Radix UI based)
- [ ] Follows Orange #ea580c brand colors
- [ ] Mobile-first responsive (test: Chrome DevTools)
- [ ] Accessibility: WCAG 2.1 AA compliant
- [ ] Storybook story created (if new component)

#### **ğŸ“ Documentation & Changelog**
- [ ] `CHANGELOG.md` updated with clear entry
- [ ] JSDoc for complex functions (>10 lines)
- [ ] Props interface well documented
- [ ] Links to relevant `docs/` sections

### **ğŸš€ CURSOR IDE PERFORMANCE TIPS**

#### **File Exclusions for Performance**
```json
// In .vscode/settings.json or Cursor settings
{
  "files.exclude": {
    "**/node_modules": true,
    "**/.next": true,
    "**/lib/validations/schemas": true,
    "**/.pnpm-store": true
  }
}
```

#### **Intelligent Code Suggestions**
- Enable **Copilot** for boilerplate (forms, API routes)
- Use **Cursor Tab** for component structure following patterns
- Leverage **Quick Fix** for auto-imports from `@/lib/utils`
- **Command Palette**: Quick access to project-specific commands

## ğŸš€ **COMANDOS ÃšTEIS**

```bash
# Development
pnpm dev                    # Iniciar desenvolvimento
pnpm build                  # Build de produÃ§Ã£o
pnpm start                  # Iniciar produÃ§Ã£o

# Database
pnpm db:generate           # Gerar cliente Prisma
pnpm db:push               # Push do schema
pnpm db:seed               # Seed do banco
pnpm db:studio             # Abrir Prisma Studio

# Testing
pnpm test                  # Rodar testes
pnpm test:watch            # Testes em watch
pnpm test:coverage         # Cobertura de testes
pnpm test:ui               # Interface de testes

# Quality
pnpm lint                  # Linting
pnpm lint:fix              # Fix automÃ¡tico
pnpm format                # FormataÃ§Ã£o
pnpm format:check          # Verificar formataÃ§Ã£o
pnpm type-check            # Verificar tipos

# Storybook
pnpm storybook             # Iniciar Storybook
pnpm build-storybook       # Build do Storybook
pnpm chromatic             # Publicar no Chromatic

# Design System
pnpm design-system:build-tokens    # Build dos tokens
pnpm design-system:watch-tokens    # Watch dos tokens
```

## ğŸ¯ **OBJETIVO FINAL**

Crie cÃ³digo que seja:

- **ManutenÃ­vel**: FÃ¡cil de entender e modificar
- **EscalÃ¡vel**: Preparado para crescimento
- **PerformÃ¡tico**: Otimizado para velocidade
- **AcessÃ­vel**: Inclusivo para todos os usuÃ¡rios
- **TestÃ¡vel**: Coberto por testes adequados
- **Documentado**: Bem explicado e exemplificado

**Lembre-se**: Qualidade sobre velocidade. Um cÃ³digo bem escrito hoje economiza
horas de debugging amanhÃ£.

---

## ğŸ† **STATUS ATUAL DO PROJETO (DEZ 2024)**

### **ğŸ¯ MÃ‰TRICAS DE SUCESSO ALCANÃ‡ADAS**

```bash
âœ… TypeScript Errors:     0 (Zero!) - 42 â†’ 0
âœ… ESLint Problems:       0 (Zero!) - 31,469 â†’ 0
âœ… Build Status:          SUCCESS (6-8s)
âœ… Test Status:           30/30 passing
âœ… Dependency Status:     100% Stable
âœ… Developer Experience:  Excellent
```

### **ğŸ›¡ï¸ ESTABILIDADE GARANTIDA**

- **Build Automation**: Script crÃ­tico protegido e funcionando
- **Type Safety Total**: Zero tolerance para tipos `any`
- **Dependency Matrix**: VersÃµes testadas e estÃ¡veis
- **Quality Standards**: Zero warnings, zero errors
- **Documentation**: Completa e atualizada

### **âš¡ PRÃ“XIMOS PASSOS**

1. **MANTER ESTABILIDADE**: NÃ£o quebrar o que estÃ¡ funcionando
2. **SEGUIR PADRÃ•ES**: Usar apenas componentes documentados
3. **DOCUMENTAR MUDANÃ‡AS**: Sempre atualizar CHANGELOG.md
4. **TESTAR SEMPRE**: Build + TypeScript + ESLint antes de commit

---

**ğŸ§  MENSAGEM FINAL PARA CURSOR**: Este projeto alcanÃ§ou um estado de excelÃªncia
tÃ©cnica. Todas as ferramentas, padrÃµes e documentaÃ§Ã£o estÃ£o alinhados. Use este
documento como fonte de verdade e mantenha os altos padrÃµes de qualidade
estabelecidos.

---

_Esta documentaÃ§Ã£o foi atualizada em dezembro 2024 apÃ³s resoluÃ§Ã£o de problemas
crÃ­ticos. Mantenha-a sempre atualizada e siga rigorosamente estas diretrizes
para garantir consistÃªncia e qualidade em todo o projeto._
