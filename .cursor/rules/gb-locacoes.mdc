---
alwaysApply: true
---
# ğŸ—ï¸ GB-LOCACOES - CURSOR RULES & DEVELOPMENT GUIDELINES

## ğŸ“š **DOCUMENTAÃ‡ÃƒO COMO FONTE DE VERDADE**

> âš ï¸ **FUNDAMENTAL**: SEMPRE consulte a documentaÃ§Ã£o em `docs/` antes de implementar qualquer funcionalidade

### **ğŸ“ Estrutura da DocumentaÃ§Ã£o Oficial**

```
ğŸ“ docs/                          # CONSULTAR SEMPRE PRIMEIRO
â”œâ”€â”€ ğŸ“ getting-started/           # Setup, desenvolvimento, deploy
â”‚   â”œâ”€â”€ ğŸ“„ installation.md       # Setup inicial + compatibilidade
â”‚   â”œâ”€â”€ ğŸ“„ development.md        # PadrÃµes de desenvolvimento
â”‚   â”œâ”€â”€ ğŸ“„ deployment.md         # Deploy e produÃ§Ã£o
â”‚   â””â”€â”€ ğŸ“„ troubleshooting.md    # SoluÃ§Ãµes de problemas
â”œâ”€â”€ ğŸ“ architecture/              # Arquitetura tÃ©cnica
â”‚   â”œâ”€â”€ ğŸ“„ overview.md           # Stack + arquitetura completa
â”‚   â”œâ”€â”€ ğŸ“„ api.md                # DocumentaÃ§Ã£o das APIs
â”‚   â””â”€â”€ ğŸ“„ security.md           # Aspectos de seguranÃ§a
â”œâ”€â”€ ğŸ“ features/                  # Funcionalidades especÃ­ficas
â”‚   â”œâ”€â”€ ğŸ“„ admin-system.md       # Sistema admin COMPLETO
â”‚   â”œâ”€â”€ ğŸ“„ analytics-dashboard.md # Dashboard Analytics NOVO (JAN 2025)
â”‚   â”œâ”€â”€ ğŸ“„ autocomplete-search.md # ğŸ†• Sistema de busca autocomplete
â”‚   â””â”€â”€ ğŸ“„ design-system.md      # Identidade visual + componentes
â”œâ”€â”€ ğŸ“ guides/                    # Guias especÃ­ficos
â”‚   â””â”€â”€ ğŸ“„ storybook.md          # DocumentaÃ§Ã£o Storybook
â”œâ”€â”€ ğŸ“ references/                # ReferÃªncias tÃ©cnicas
â”‚   â””â”€â”€ ğŸ“„ dependencies.md       # Compatibilidade dependÃªncias
â””â”€â”€ ğŸ“ internal/                  # DocumentaÃ§Ã£o interna
    â”œâ”€â”€ ğŸ“„ cursor-setup.md       # Setup especÃ­fico Cursor
    â””â”€â”€ ğŸ“„ project-decisions.md  # DecisÃµes arquiteturais
```

### **ğŸ§  Anti-AlucinaÃ§Ã£o Protocol**

1. **ğŸ“– SEMPRE LER PRIMEIRO**: Antes de qualquer implementaÃ§Ã£o, consulte:
   - `docs/architecture/overview.md` - Para entender a arquitetura
   - `docs/features/design-system.md` - Para componentes e estilos
   - `docs/features/admin-system.md` - Para funcionalidades admin
   - `docs/getting-started/development.md` - Para padrÃµes de cÃ³digo

2. **ğŸ¨ DESIGN SYSTEM**: Use APENAS componentes documentados em:
   - `docs/features/design-system.md` - Sistema de design completo
   - `docs/features/admin-system.md` - Componentes administrativos
   - `stories/` - DocumentaÃ§Ã£o visual no Storybook

3. **ğŸ—ï¸ ARQUITETURA**: Siga RIGOROSAMENTE os padrÃµes em:
   - `docs/architecture/overview.md` - Estrutura e tecnologias
   - `docs/getting-started/development.md` - PadrÃµes de desenvolvimento

4. **âš ï¸ COMPATIBILIDADE**: Verifique SEMPRE em:
   - `docs/references/dependencies.md` - VersÃµes testadas e incompatibilidades

### **ğŸš¨ PROBLEMAS CRÃTICOS RESOLVIDOS (DEZ 2024 - JAN 2025) - NÃƒO REINTRODUZIR**

> âš ï¸ **ATENÃ‡ÃƒO CURSOR**: Este projeto passou por correÃ§Ãµes massivas em dezembro de 2024 e descoberta crÃ­tica em janeiro 2025. NÃƒO reintroduza problemas que foram resolvidos!

#### **ğŸ—ï¸ Build Infrastructure - 100% ESTÃVEL**

- **âŒ NUNCA DELETE**: `scripts/post-prisma-generate.js` - arquivo CRÃTICO para build
- **âŒ NUNCA MODIFIQUE**: Scripts em `package.json` sem entender dependÃªncias
- **âœ… FUNCIONANDO**: Build automation que recria `lib/validations/index.ts`
- **ğŸ¯ STATUS**: Build time 6-8s, 100% success rate

#### **ğŸ”’ TypeScript - ZERO ERRORS ACHIEVED**

- **âŒ JAMAIS USE**: Tipos `any` - sempre crie interfaces especÃ­ficas
- **âœ… SEMPRE USE**: Safe navigation (`?.`) em objetos potencialmente undefined
- **âœ… SEMPRE USE**: Type guards e casts seguros (`as NextResponse`, `as const`)
- **ğŸ¯ STATUS**: 42 â†’ 0 erros TypeScript (100% resolvido)

#### **ğŸ“¦ Dependencies - MATRIX ESTÃVEL**

- **âŒ NÃƒO ATUALIZE**: Prisma para 6.14.0+ (quebra build completamente)
- **ğŸš¨ PRISMA 6.15.0**: VariÃ¡vel `PRISMA_GENERATE_DATAPROXY="false"` forÃ§a `engine=none` causando erro P6001
- **âŒ NÃƒO USE**: swagger-ui-react (incompatÃ­vel React 19)
- **âœ… IMPLEMENTAÃ‡ÃƒO CUSTOM**: `app/api-docs/page.tsx` para documentaÃ§Ã£o API
- **ğŸ¯ STATUS**: Zero conflitos de dependÃªncias

#### **ğŸ¯ ESLint - ZERO PROBLEMS ACHIEVED**

- **âŒ NÃƒO INCLUA**: Arquivos auto-gerados no linting
- **âœ… MANTENHA**: ExclusÃµes em `tsconfig.json` para `lib/validations/schemas/**`
- **ğŸ¯ STATUS**: 31,469 â†’ 0 problemas ESLint (100% resolvido)

#### **ğŸ“š DOCUMENTAÃ‡ÃƒO CRÃTICA PARA CURSOR**

- **ğŸ“– LEIA ANTES**: `docs/internal/critical-issues-resolved.md` - SOURCE OF TRUTH
- **ğŸ”¬ ANÃLISE CRÃTICA**: `docs/internal/prisma-6-15-engine-none-analysis.md` - Problema PRISMA_GENERATE_DATAPROXY
- **ğŸ“ CONSULTE**: `docs/getting-started/troubleshooting.md` - problemas conhecidos
- **ğŸ§  ENTENDA**: Todas as soluÃ§Ãµes sÃ£o DEFINITIVAS e foram testadas
- **âš¡ MÃ‰TRICAS**: TypeScript 0 errors, ESLint 0 problems, Build SUCCESS, Tests 30/30

### **ğŸš¨ REGRAS CRÃTICAS DE DOCUMENTAÃ‡ÃƒO**

1. **NÃƒO ALUCINE**: Se nÃ£o souber algo, consulte `docs/` primeiro
2. **NÃƒO INVENTE**: Use apenas componentes e padrÃµes documentados
3. **NÃƒO QUEBRE**: Siga as versÃµes especÃ­ficas em `docs/references/dependencies.md`
4. **NÃƒO IGNORE**: Toda funcionalidade deve seguir os padrÃµes em `docs/getting-started/development.md`
5. **ğŸ“ DOCUMENTE SEMPRE**: Atualize o `CHANGELOG.md` apÃ³s qualquer alteraÃ§Ã£o

### **ğŸ“– Fluxo de Trabalho ObrigatÃ³rio**

```
1. ğŸ“š LER docs relevantes
   â†“
2. ğŸ” VERIFICAR compatibilidade
   â†“
3. ğŸ¨ USAR componentes do design system
   â†“
4. ğŸ—ï¸ IMPLEMENTAR seguindo padrÃµes
   â†“
5. ğŸ“ ATUALIZAR CHANGELOG.md com mudanÃ§as
   â†“
6. âœ… TESTAR com referÃªncia na documentaÃ§Ã£o
```

## ğŸ¯ **VISÃƒO GERAL DO PROJETO**

**GB-Locacoes** Ã© uma plataforma moderna de locaÃ§Ã£o de equipamentos para construÃ§Ã£o civil, desenvolvida com Next.js 15, TypeScript, Prisma, PostgreSQL e um design system robusto. O projeto segue princÃ­pios de arquitetura limpa, componentizaÃ§Ã£o inteligente e experiÃªncia do usuÃ¡rio excepcional.

## ğŸ›ï¸ **ARQUITETURA & ESTRUTURA**

### **Stack Principal**

- **Framework**: Next.js 15.4.6 (App Router)
- **Linguagem**: TypeScript 5.9.2
- **UI**: React 19.1.1 + Tailwind CSS 3.4.17
- **Database**: PostgreSQL + Prisma 6.13.0
- **Auth**: NextAuth.js 4.24.11
- **State**: Zustand 5.0.7 + React Hook Form 7.62.0
- **Testing**: Vitest + Testing Library + Playwright

### **Estrutura de DiretÃ³rios**

```
GB-Locacoes/
â”œâ”€â”€ app/                    # App Router (Next.js 13+)
â”‚   â”œâ”€â”€ admin/             # Ãrea administrativa
â”‚   â”œâ”€â”€ api/               # API Routes
â”‚   â””â”€â”€ (public)/          # Rotas pÃºblicas
â”œâ”€â”€ components/            # Componentes React
â”‚   â”œâ”€â”€ ui/               # Componentes base (Radix UI)
â”‚   â””â”€â”€ (feature)/        # Componentes especÃ­ficos
â”œâ”€â”€ lib/                  # UtilitÃ¡rios e configuraÃ§Ãµes
â”œâ”€â”€ hooks/                # Custom hooks
â”œâ”€â”€ types/                # DefiniÃ§Ãµes TypeScript
â”œâ”€â”€ schemas/              # Schemas de validaÃ§Ã£o (Zod)
â”œâ”€â”€ prisma/               # Schema e migraÃ§Ãµes
â”œâ”€â”€ stories/              # Storybook stories
â”œâ”€â”€ design-tokens/        # Sistema de design tokens
â””â”€â”€ tests/                # Testes
```

## ğŸ¨ **DESIGN SYSTEM & IDENTIDADE VISUAL**

### **PrincÃ­pios de Design**

1. **ConsistÃªncia**: Todos os componentes devem seguir o design system estabelecido
2. **Acessibilidade**: WCAG 2.1 AA compliance obrigatÃ³rio
3. **Responsividade**: Mobile-first approach
4. **Performance**: OtimizaÃ§Ã£o para Core Web Vitals
5. **Usabilidade**: UX intuitiva e eficiente

### **Sistema de Cores**

- **PrimÃ¡ria**: `#ea580c` (Orange-600)
- **SecundÃ¡ria**: `#3B82F6` (Blue-500)
- **Neutra**: Escala de cinzas do Tailwind
- **SemÃ¢ntica**: Success (green), Warning (yellow), Error (red)

### **Tipografia**

- **Sans**: Inter (var(--font-inter))
- **Heading**: Jost (var(--font-heading))
- **Escalas**: h1, h2, h3, base, small (clamp responsivo)

### **Componentes Base (Radix UI)**

SEMPRE utilize os componentes do diretÃ³rio `components/ui/` que sÃ£o baseados em Radix UI:

- `Button` - BotÃµes com variantes: default, destructive, outline, secondary, ghost, reset, link
- `Card` - Containers de conteÃºdo
- `Dialog` - Modais e overlays
- `Form` - FormulÃ¡rios com React Hook Form + Zod
- `Input` - Campos de entrada
- `Select` - Seletores dropdown
- `Toast` - NotificaÃ§Ãµes (via Sonner)
- `Carousel` - CarrossÃ©is (via Embla)
- `Table` - Tabelas de dados
- `Tabs` - NavegaÃ§Ã£o por abas
- `Accordion` - AcordeÃµes expansÃ­veis

### **Design Tokens**

Utilize SEMPRE os tokens do design system:

- Cores: `design-tokens/output/tokens-tailwind.json`
- EspaÃ§amentos: Sistema 4px (4, 8, 12, 16, 20, 24, 32, 48, 64)
- Bordas: `--radius` (8px padrÃ£o)
- Sombras: Sistema de elevaÃ§Ã£o consistente

## ğŸ§© **PADRÃ•ES DE COMPONENTES**

### **Estrutura de Componente**

```typescript
'use client'

import { cn } from '@/lib/utils'
import { cva, type VariantProps } from 'class-variance-authority'
import * as React from 'react'

const componentVariants = cva(
  'base-classes',
  {
    variants: {
      variant: {
        default: 'default-classes',
        // outras variantes
      },
      size: {
        default: 'default-size',
        // outros tamanhos
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  }
)

export interface ComponentProps
  extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof componentVariants> {
  // props especÃ­ficas
}

const Component = React.forwardRef<HTMLDivElement, ComponentProps>(
  ({ className, variant, size, ...props }, ref) => {
    return (
      <div
        className={cn(componentVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    )
  }
)
Component.displayName = 'Component'

export { Component, componentVariants }
```

### **Regras de Nomenclatura**

- **Componentes**: PascalCase (`EquipmentCard.tsx`)
- **Hooks**: camelCase com prefixo `use` (`useQuoteForm.ts`)
- **UtilitÃ¡rios**: camelCase (`formatCurrency.ts`)
- **Tipos**: PascalCase (`EquipmentType.ts`)
- **Constantes**: UPPER_SNAKE_CASE (`API_ENDPOINTS`)

## ğŸ”§ **DESENVOLVIMENTO & BOAS PRÃTICAS**

### **TypeScript**

- **Strict Mode**: Sempre habilitado
- **Interfaces vs Types**: Use interfaces para objetos, types para unions/intersections
- **Generics**: Utilize quando apropriado para reutilizaÃ§Ã£o
- **Utility Types**: Aproveite `Pick`, `Omit`, `Partial`, `Required`

### **React Patterns**

- **Hooks**: Custom hooks para lÃ³gica reutilizÃ¡vel
- **Context**: Para estado global (Settings, Auth)
- **ForwardRef**: Para componentes que precisam de ref
- **Memo**: Para otimizaÃ§Ã£o de performance quando necessÃ¡rio
- **Error Boundaries**: Para tratamento de erros

### **FormulÃ¡rios**

SEMPRE use React Hook Form + Zod:

```typescript
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { z } from 'zod'

const formSchema = z.object({
  name: z.string().min(1, 'Nome Ã© obrigatÃ³rio'),
  email: z.string().email('Email invÃ¡lido'),
})

type FormData = z.infer<typeof formSchema>

const MyForm = () => {
  const form = useForm<FormData>({
    resolver: zodResolver(formSchema),
  })

  return (
    <Form {...form}>
      <FormField
        control={form.control}
        name="name"
        render={({ field }) => (
          <FormItem>
            <FormLabel>Nome</FormLabel>
            <FormControl>
              <Input {...field} />
            </FormControl>
            <FormMessage />
          </FormItem>
        )}
      />
    </Form>
  )
}
```

### **ValidaÃ§Ã£o**

- **Zod**: Para validaÃ§Ã£o de schemas
- **React Hook Form**: Para gerenciamento de formulÃ¡rios
- **ValidaÃ§Ã£o Server-side**: Sempre implemente validaÃ§Ã£o no backend

### **Estado Global**

- **Zustand**: Para estado global simples
- **Context**: Para configuraÃ§Ãµes e autenticaÃ§Ã£o
- **Local State**: Para estado especÃ­fico de componentes

## ğŸ¯ **FUNCIONALIDADES ESPECÃFICAS**

### **Sistema de AutenticaÃ§Ã£o**

- **NextAuth.js**: Para autenticaÃ§Ã£o
- **Roles**: ADMIN, CLIENT
- **Middleware**: ProteÃ§Ã£o de rotas
- **JWT**: Tokens de sessÃ£o

### **Upload de Arquivos**

- **Vercel Blob**: Para armazenamento
- **Supabase Storage**: Backup
- **ValidaÃ§Ã£o**: Tamanho e tipo de arquivo
- **Preview**: Para imagens

### **IntegraÃ§Ãµes Externas**

- **Stripe**: Pagamentos
- **Resend**: Emails
- **Melhor Envio**: Frete
- **ZapSign**: Assinaturas

### **ğŸ“Š Analytics e Monitoramento (NOVO - JAN 2025)**

- **Dashboard Analytics**: `/admin/analytics` - MÃ©tricas em tempo real
- **Sistema de Telemetria**: `lib/telemetry.ts` - Rastreamento simplificado
- **MÃ©tricas de API**: `lib/metrics.ts` - Coleta automÃ¡tica de performance
- **Security Monitoring**: `lib/security-monitoring.ts` - DetecÃ§Ã£o de ameaÃ§as
- **API Instrumentation**: `lib/api-instrumentation.ts` - InstrumentaÃ§Ã£o automÃ¡tica
- **OpenAPI Documentation**: `/api-docs` - DocumentaÃ§Ã£o interativa da API

### **ğŸ” Autocomplete Search (NOVO - JAN 2025)**

- **Componente**: `components/ui/autocomplete.tsx` - Busca inteligente reutilizÃ¡vel
- **API Endpoint**: `/api/equipamentos/search` - Busca otimizada no banco
- **Funcionalidades**:
  - Debounce de 300ms para performance
  - NavegaÃ§Ã£o completa por teclado
  - Feedback visual com ring verde
  - Redirecionamento contextual inteligente
  - 100% acessÃ­vel com ARIA labels
- **DocumentaÃ§Ã£o Completa**: `docs/features/autocomplete-search.md`

### **Performance**

- **Next.js Image**: OtimizaÃ§Ã£o de imagens
- **Lazy Loading**: Para componentes pesados
- **Code Splitting**: AutomÃ¡tico com Next.js
- **Caching**: EstratÃ©gias apropriadas

## ğŸ§ª **TESTING & QUALIDADE**

### **Testes**

- **Unit**: Vitest + Testing Library
- **Integration**: API routes
- **E2E**: Playwright
- **Storybook**: Para componentes

### **Code Quality**

- **ESLint**: ConfiguraÃ§Ã£o estrita
- **Prettier**: FormataÃ§Ã£o consistente
- **TypeScript**: Strict mode
- **Husky**: Git hooks

## ğŸ“± **RESPONSIVIDADE & MOBILE - DOUTRINA OBRIGATÃ“RIA**

### **ğŸš¨ REGRA FUNDAMENTAL**
**TODA nova implementaÃ§Ã£o DEVE seguir RIGOROSAMENTE os padrÃµes de responsividade e espaÃ§amento jÃ¡ estabelecidos no projeto.**

### **ğŸ“ SISTEMA DE ESPAÃ‡AMENTO OBRIGATÃ“RIO**

#### **Containers Principais**
- **Mobile**: `px-4` (16px lateral)
- **Tablet**: `sm:px-6` (24px lateral)  
- **Desktop**: `lg:px-8` (32px lateral)
- **PadrÃ£o Completo**: `px-4 sm:px-6 lg:px-8`

#### **EspaÃ§amento Vertical Entre SeÃ§Ãµes**
- **Mobile**: `py-8` ou `py-12` (32px-48px)
- **Tablet**: `md:py-12` ou `md:py-16` (48px-64px)
- **Desktop**: `lg:py-16` ou `lg:py-20` (64px-80px)
- **PadrÃ£o Completo**: `py-12 md:py-16 lg:py-20`

#### **Gaps em Grids**
- **Mobile**: `gap-4` ou `gap-6` (16px-24px)
- **Tablet**: `md:gap-6` ou `md:gap-8` (24px-32px)
- **Desktop**: `lg:gap-8` ou `lg:gap-12` (32px-48px)
- **PadrÃ£o Completo**: `gap-6 md:gap-8 lg:gap-12`

#### **Margens Entre Elementos**
- **Pequena**: `mb-4 md:mb-6` (16px-24px)
- **MÃ©dia**: `mb-6 md:mb-8` (24px-32px)
- **Grande**: `mb-8 md:mb-12` (32px-48px)
- **Extra Grande**: `mb-12 md:mb-16` (48px-64px)

### **ğŸ—ï¸ PADRÃ•ES DE GRID RESPONSIVO OBRIGATÃ“RIOS**

#### **Grid de Cards/Produtos**
```typescript
// PADRÃƒO OBRIGATÃ“RIO para listagem de itens
className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8"

// Para cards maiores (destaque)
className="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12"

// Para estatÃ­sticas/mÃ©tricas
className="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6"
```

#### **Layout de ConteÃºdo**
```typescript
// Sidebar + ConteÃºdo
className="grid grid-cols-1 lg:grid-cols-4 gap-8 lg:gap-12"

// Duas colunas equilibradas
className="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12"

// TrÃªs colunas (features, benefÃ­cios)
className="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8"
```

### **ğŸ§© PADRÃ•ES DE COMPONENTES RESPONSIVOS**

#### **Hero Sections**
```typescript
// Estrutura obrigatÃ³ria para hero sections
<section className="relative py-12 md:py-16 lg:py-20">
  <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div className="text-center space-y-6 md:space-y-8">
      <h1 className="text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold">
        TÃ­tulo
      </h1>
      <p className="text-lg md:text-xl lg:text-2xl max-w-3xl mx-auto">
        SubtÃ­tulo
      </p>
    </div>
  </div>
</section>
```

#### **Cards Responsivos**
```typescript
// Estrutura obrigatÃ³ria para cards
<div className="bg-white rounded-xl shadow-lg p-6 md:p-8 hover:shadow-xl transition-shadow">
  <div className="space-y-4 md:space-y-6">
    {/* ConteÃºdo */}
  </div>
</div>
```

#### **FormulÃ¡rios Responsivos**
```typescript
// Estrutura obrigatÃ³ria para formulÃ¡rios
<form className="space-y-6 md:space-y-8">
  <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
    {/* Campos */}
  </div>
</form>
```

### **ğŸ“ TIPOGRAFIA RESPONSIVA OBRIGATÃ“RIA**

#### **Hierarquia de TÃ­tulos**
```typescript
// H1 - TÃ­tulos principais
className="text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold"

// H2 - TÃ­tulos de seÃ§Ã£o
className="text-2xl md:text-3xl lg:text-4xl font-bold"

// H3 - SubtÃ­tulos
className="text-xl md:text-2xl lg:text-3xl font-semibold"

// H4 - TÃ­tulos menores
className="text-lg md:text-xl lg:text-2xl font-semibold"
```

#### **Texto Corpo**
```typescript
// Texto principal
className="text-base md:text-lg leading-relaxed"

// Texto secundÃ¡rio
className="text-sm md:text-base text-gray-600"

// Texto pequeno (legendas, etc.)
className="text-xs md:text-sm text-gray-500"
```

### **âŒ ANTI-PADRÃ•ES - NUNCA FAÃ‡A**

#### **EspaÃ§amento Proibido**
- âŒ NUNCA use valores fixos sem responsividade: `p-8` (sem `md:p-12`)
- âŒ NUNCA ignore breakpoints: `px-4` sem `sm:px-6 lg:px-8`
- âŒ NUNCA use espaÃ§amentos inconsistentes com o projeto
- âŒ NUNCA quebre a hierarquia de espaÃ§amento estabelecida

#### **Grid Proibido**
- âŒ NUNCA use grids sem responsividade: `grid-cols-3` (sem `md:grid-cols-3`)
- âŒ NUNCA ignore o padrÃ£o mobile-first
- âŒ NUNCA use layouts que quebrem em mobile

#### **Tipografia Proibida**
- âŒ NUNCA use tamanhos fixos sem responsividade
- âŒ NUNCA ignore a hierarquia estabelecida
- âŒ NUNCA use fontes que nÃ£o sejam do design system

### **âœ… CHECKLIST DE VALIDAÃ‡ÃƒO OBRIGATÃ“RIO**

Antes de implementar QUALQUER componente novo, verifique:

#### **Responsividade**
- [ ] Testado em mobile (320px-767px)
- [ ] Testado em tablet (768px-1023px)  
- [ ] Testado em desktop (1024px+)
- [ ] Usa breakpoints consistentes com o projeto

#### **EspaÃ§amento**
- [ ] Segue padrÃµes de padding do projeto
- [ ] Usa margens consistentes
- [ ] Gaps em grids seguem o padrÃ£o
- [ ] EspaÃ§amento vertical entre seÃ§Ãµes correto

#### **Componentes**
- [ ] Usa componentes do design system existente
- [ ] MantÃ©m identidade visual do projeto
- [ ] AnimaÃ§Ãµes consistentes com o projeto
- [ ] Estados hover/focus implementados

### **Breakpoints PadrÃ£o**

- **Mobile**: < 640px
- **Small**: 640px+ (`sm:`)
- **Medium**: 768px+ (`md:`)
- **Large**: 1024px+ (`lg:`)
- **Extra Large**: 1280px+ (`xl:`)
- **2XL**: 1536px+ (`2xl:`)

### **Mobile-First ObrigatÃ³rio**

- Comece sempre com estilos mobile
- Use `sm:`, `md:`, `lg:`, `xl:`, `2xl:` para breakpoints maiores
- Teste em dispositivos reais
- Mantenha consistÃªncia com padrÃµes estabelecidos

## ğŸš€ **DEPLOY & PRODUÃ‡ÃƒO**

### **Ambientes**

- **Development**: `pnpm dev`
- **Staging**: Vercel Preview
- **Production**: Vercel

### **VariÃ¡veis de Ambiente**

- **DATABASE_URL**: PostgreSQL
- **NEXTAUTH_SECRET**: AutenticaÃ§Ã£o
- **STRIPE_SECRET_KEY**: Pagamentos
- **RESEND_API_KEY**: Emails

## ğŸ¨ **DIRETRIZES DE UI/UX**

### **InteraÃ§Ãµes**

- **Hover States**: Sempre implemente
- **Focus States**: Para acessibilidade
- **Loading States**: Para operaÃ§Ãµes assÃ­ncronas
- **Error States**: Tratamento de erros
- **Success States**: Feedback positivo

### **AnimaÃ§Ãµes**

- **Framer Motion**: Para animaÃ§Ãµes complexas
- **CSS Transitions**: Para micro-interaÃ§Ãµes
- **Performance**: 60fps sempre
- **Reduced Motion**: Respeite preferÃªncias do usuÃ¡rio

### **Acessibilidade**

- **ARIA Labels**: Sempre implemente
- **Keyboard Navigation**: NavegaÃ§Ã£o por teclado
- **Screen Readers**: Compatibilidade
- **Color Contrast**: MÃ­nimo 4.5:1
- **Focus Management**: Gerenciamento de foco

## ğŸ” **DEBUGGING & MONITORING**

### **Logging**

- **Pino**: Para logs estruturados
- **Vercel Analytics**: MÃ©tricas de performance
- **Error Tracking**: Captura de erros

### **Development Tools**

- **React DevTools**: Para debugging
- **Prisma Studio**: Para database
- **Storybook**: Para componentes

## ğŸ“š **DOCUMENTAÃ‡ÃƒO**

### **CÃ³digo**

- **JSDoc**: Para funÃ§Ãµes complexas
- **README**: Para cada diretÃ³rio importante
- **TypeScript**: Tipos bem definidos

### **Componentes**

- **Storybook**: DocumentaÃ§Ã£o visual
- **Props Interface**: Bem documentada
- **Examples**: Casos de uso

## âš ï¸ **ANTI-PADRÃ•ES (NÃƒO FAÃ‡A)**

### **Design System**

- âŒ NÃ£o crie componentes fora do design system
- âŒ NÃ£o use cores hardcoded
- âŒ NÃ£o ignore acessibilidade
- âŒ NÃ£o quebre a responsividade

### **Performance**

- âŒ NÃ£o faÃ§a re-renders desnecessÃ¡rios
- âŒ NÃ£o carregue dados desnecessÃ¡rios
- âŒ NÃ£o ignore lazy loading
- âŒ NÃ£o use imagens nÃ£o otimizadas

### **TypeScript**

- âŒ NÃ£o use `any`
- âŒ NÃ£o ignore erros de tipo
- âŒ NÃ£o use `@ts-ignore` sem justificativa
- âŒ NÃ£o crie tipos desnecessÃ¡rios

### **React**

- âŒ NÃ£o use `useEffect` sem dependÃªncias
- âŒ NÃ£o ignore o ESLint
- âŒ NÃ£o crie componentes muito grandes
- âŒ NÃ£o ignore o React.memo quando apropriado

### **ğŸš¨ ANTI-PADRÃ•ES CRÃTICOS (BASEADOS EM PROBLEMAS RESOLVIDOS)**

#### **Build & Infrastructure**

- âŒ **NUNCA DELETE**: `scripts/post-prisma-generate.js` - quebra build completamente
- âŒ **NUNCA MODIFIQUE**: Scripts `prebuild`, `postinstall`, `db:generate` sem entender
- âŒ **NUNCA IGNORE**: Arquivos auto-gerados - sempre exclua do linting

#### **Dependencies & Compatibility**

- âŒ **NUNCA ATUALIZE**: Prisma para 6.14.0+ - incompatÃ­vel com Next.js 15
- âŒ **NUNCA USE**: swagger-ui-react - incompatÃ­vel com React 19
- âŒ **NUNCA ASSUMA**: Compatibilidade de packages - sempre consulte `docs/references/dependencies.md`

#### **Type Safety (CRÃTICO)**

- âŒ **NUNCA USE**: `unknown` sem type guards
- âŒ **NUNCA ACESSE**: Propriedades sem safe navigation (`?.`)
- âŒ **NUNCA MISTURE**: `Response | NextResponse` - sempre cast especÃ­fico

#### **ESLint & Code Quality**

- âŒ **NUNCA INCLUA**: `lib/validations/schemas/**` no linting
- âŒ **NUNCA IGNORE**: Warnings de unused imports - sempre limpe
- âŒ **NUNCA QUEBRE**: ConfiguraÃ§Ã£o do `tsconfig.json` exclude patterns

#### **Environment Variables (CRÃTICO)**

- âŒ **NUNCA DEFINA**: `PRISMA_GENERATE_DATAPROXY` (mesmo como "false")
- âŒ **NUNCA DEFINA**: `PRISMA_GENERATE_ACCELERATE` ou `PRISMA_GENERATE_NO_ENGINE`
- âœ… **SEMPRE VERIFIQUE**: `npx prisma generate` deve mostrar `engine=binary`
- ğŸ“– **CONSULTE**: `docs/internal/prisma-6-15-engine-none-analysis.md` para detalhes

#### **Autocomplete Specific (NOVO)**

- âŒ **NUNCA USE**: `onClick` para seleÃ§Ã£o - use `onMouseDown`
- âŒ **NUNCA IGNORE**: Event bubbling - sempre use `preventDefault()`
- âŒ **NUNCA ESQUEÃ‡A**: De limpar o dropdown ao selecionar
- âŒ **NUNCA USE**: Z-index baixo - mÃ­nimo `z-[9999]` para dropdowns
- âœ… **SEMPRE TESTE**: Em diferentes resoluÃ§Ãµes e com scroll

## ğŸ¯ **CHECKLIST DE DESENVOLVIMENTO**

Antes de submeter qualquer cÃ³digo, verifique:

### **Funcionalidade**

- [ ] Funcionalidade implementada corretamente
- [ ] ValidaÃ§Ã£o adequada
- [ ] Tratamento de erros
- [ ] Loading states
- [ ] Success/error feedback

### **Design**

- [ ] Segue o design system
- [ ] Responsivo em todos os breakpoints
- [ ] AcessÃ­vel (ARIA, keyboard, contrast)
- [ ] AnimaÃ§Ãµes suaves
- [ ] Estados visuais (hover, focus, active)

### **CÃ³digo**

- [ ] TypeScript sem erros (TARGET: 0 errors)
- [ ] ESLint sem warnings (TARGET: 0 problems)
- [ ] Prettier aplicado
- [ ] Testes passando (TARGET: 30/30)
- [ ] Performance adequada
- [ ] **CRÃTICO**: Build funcionando (`pnpm build` deve succeeder)
- [ ] **CRÃTICO**: `scripts/post-prisma-generate.js` nÃ£o foi deletado
- [ ] **CRÃTICO**: NÃ£o introduziu tipos `any` sem justificativa extrema

### **DocumentaÃ§Ã£o**

- [ ] JSDoc para funÃ§Ãµes complexas
- [ ] Props bem documentadas
- [ ] README atualizado se necessÃ¡rio
- [ ] Storybook stories se aplicÃ¡vel

## ğŸš€ **COMANDOS ÃšTEIS**

```bash
# Development
pnpm dev                    # Iniciar desenvolvimento
pnpm build                  # Build de produÃ§Ã£o
pnpm start                  # Iniciar produÃ§Ã£o

# Database
pnpm db:generate           # Gerar cliente Prisma
pnpm db:push               # Push do schema
pnpm db:seed               # Seed do banco
pnpm db:studio             # Abrir Prisma Studio

# Testing
pnpm test                  # Rodar testes
pnpm test:watch            # Testes em watch
pnpm test:coverage         # Cobertura de testes
pnpm test:ui               # Interface de testes

# Quality
pnpm lint                  # Linting
pnpm lint:fix              # Fix automÃ¡tico
pnpm format                # FormataÃ§Ã£o
pnpm format:check          # Verificar formataÃ§Ã£o
pnpm type-check            # Verificar tipos

# Storybook
pnpm storybook             # Iniciar Storybook
pnpm build-storybook       # Build do Storybook
pnpm chromatic             # Publicar no Chromatic

# Design System
pnpm design-system:build-tokens    # Build dos tokens
pnpm design-system:watch-tokens    # Watch dos tokens
```

## ğŸ¯ **OBJETIVO FINAL**

Crie cÃ³digo que seja:

- **ManutenÃ­vel**: FÃ¡cil de entender e modificar
- **EscalÃ¡vel**: Preparado para crescimento
- **PerformÃ¡tico**: Otimizado para velocidade
- **AcessÃ­vel**: Inclusivo para todos os usuÃ¡rios
- **TestÃ¡vel**: Coberto por testes adequados
- **Documentado**: Bem explicado e exemplificado

**Lembre-se**: Qualidade sobre velocidade. Um cÃ³digo bem escrito hoje economiza horas de debugging amanhÃ£.

---

## ğŸ† **STATUS ATUAL DO PROJETO (JAN 2025)**

### **ğŸ¯ MÃ‰TRICAS DE SUCESSO ALCANÃ‡ADAS**

```bash
âœ… TypeScript Errors:     0 (Zero!) - 42 â†’ 0
âœ… ESLint Problems:       0 (Zero!) - 31,469 â†’ 0
âœ… Build Status:          SUCCESS (6-8s)
âœ… Test Status:           30/30 passing
âœ… Dependency Status:     100% Stable
âœ… Developer Experience:  Excellent
```

### **ğŸ›¡ï¸ ESTABILIDADE GARANTIDA**

- **Build Automation**: Script crÃ­tico protegido e funcionando
- **Type Safety Total**: Zero tolerance para tipos `any`
- **Dependency Matrix**: VersÃµes testadas e estÃ¡veis
- **Quality Standards**: Zero warnings, zero errors
- **Documentation**: Completa e atualizada

### **âš¡ PRÃ“XIMOS PASSOS**

1. **MANTER ESTABILIDADE**: NÃ£o quebrar o que estÃ¡ funcionando
2. **SEGUIR PADRÃ•ES**: Usar apenas componentes documentados
3. **DOCUMENTAR MUDANÃ‡AS**: Sempre atualizar CHANGELOG.md
4. **TESTAR SEMPRE**: Build + TypeScript + ESLint antes de commit

---

**ğŸ§  MENSAGEM FINAL PARA CURSOR**: Este projeto alcanÃ§ou um estado de excelÃªncia tÃ©cnica. Todas as ferramentas, padrÃµes e documentaÃ§Ã£o estÃ£o alinhados. Use este documento como fonte de verdade e mantenha os altos padrÃµes de qualidade estabelecidos.

---

_Esta documentaÃ§Ã£o foi atualizada em janeiro 2025 apÃ³s implementaÃ§Ã£o do sistema de autocomplete. Mantenha-a sempre atualizada e siga rigorosamente estas diretrizes para garantir consistÃªncia e qualidade em todo o projeto._